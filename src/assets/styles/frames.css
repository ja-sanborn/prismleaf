/**
 * Prismleaf Frames
 *
 * Frame and global region layout hooks.
 *
 * @package prismleaf
 */

:root {

	/* Frame tokens. */
	--prismleaf-frame-background-color: var(--prismleaf-color-surface-1);
	--prismleaf-frame-border-color: var(--prismleaf-color-outline);
	--prismleaf-frame-border-radius: var(--prismleaf-radius-medium);
	--prismleaf-frame-border-style: var(--prismleaf-border-style);
	--prismleaf-frame-border-width: var(--prismleaf-border-width-thin);
	--prismleaf-frame-elevation: var(--prismleaf-shadow-elevation-1);
	--prismleaf-frame-foreground-color: var(--prismleaf-color-surface-on);
	--prismleaf-frame-gap: var(--prismleaf-space-2);
	--prismleaf-frame-overflow: auto;
	--prismleaf-frame-stretch: start;
	--prismleaf-region-overflow: hidden;

	/* Viewport size tokens. */
	--prismleaf-max-view-height: 100svh;
	--prismleaf-max-view-width: 100svw;
	--prismleaf-view-height: auto;
}

/* Fallback for browsers that do not support dynamic viewport units. */
@supports (height: 100dvh) {

	:root {
		--prismleaf-max-view-height: 100dvh;
		--prismleaf-max-view-width: 100dvw;
	}
}

/* Admin bar offset is consumed by framed mode. */
.admin-bar {
	--prismleaf-admin-bar-offset: var(--wp-admin--admin-bar--height, 32px);
}

@media (max-width: 782px) {

	.admin-bar {
		--prismleaf-admin-bar-offset: var(--wp-admin--admin-bar--height, 46px);
	}
}

/* Reset margins and padding for frame and regions. */
.prismleaf-frame,
.prismleaf-frame-main,
.prismleaf-frame-inner {
	overflow: hidden;
	margin: 0;
	padding: 0;
}

/* Frame wrapper sizing. */
.prismleaf-frame,
.prismleaf-frame-inner {
	height: var(--prismleaf-view-height);
	inline-size: 100%;
	max-inline-size: 100%;
	align-items: var(--prismleaf-frame-stretch);
	display: grid;
	grid-template-areas:
		"header header header"
		"sidebar-left content sidebar-right"
		"footer footer footer";
	grid-template-columns: auto minmax(0, 1fr) auto;
	grid-template-rows: auto 1fr auto;
	overflow: hidden;
	overflow-x: hidden;
	overflow-y: var(--prismleaf-frame-overflow);
}

/* Main frame container layout. */
.prismleaf-frame-main {
	overflow-x: hidden;
	overflow-y: var(--prismleaf-region-overflow);
	grid-area: content;
	inline-size: 100%;
	min-width: 0;
	padding: var(--prismleaf-frame-gap);
}

/* Frame surface styling. */
.prismleaf-frame-inner {
	background-color: var(--prismleaf-frame-background-color);
	border-color: var(--prismleaf-frame-border-color);
	border-radius: var(--prismleaf-frame-border-radius);
	border-style: var(--prismleaf-frame-border-style);
	border-width: var(--prismleaf-frame-border-width);
	box-shadow: var(--prismleaf-frame-elevation);
	color: var(--prismleaf-frame-foreground-color);
	inline-size: 100%;
	margin-inline: auto;
	max-width: var(--prismleaf-content-max);
}

/* Global region helper stylings. */
.prismleaf-region {
	gap: var(--prismleaf-space-2);
	min-width: 0;
	min-height: 0;
}

.prismleaf-region-content {
	background-color: var(--prismleaf-region-content-background);
	color: var(--prismleaf-region-content-foreground);

	border-width: var(--prismleaf-border-width-thin);
	border-style: var(--prismleaf-region-content-border-style);
	border-color: var(--prismleaf-region-content-border-color);
	border-radius: var(--prismleaf-region-content-radius);

	box-shadow: var(--prismleaf-region-content-shadow);
	padding: var(--prismleaf-space-2);
}

/* Mobile / stacked layout (<= 769px). */
@media (max-width: 768px) {

	.prismleaf-frame {
		position: static;
		width: auto;
		height: auto;
		display: block;
		padding: 0;
	}

	.prismleaf-frame > .prismleaf-region + .prismleaf-region {
		margin-top: var(--prismleaf-space-1);
	}

	.prismleaf-region-content > * + * {
		margin-top: var(--prismleaf-space-1);
	}
}
